(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-347a9736"],{"1c9f":function(e,a,t){"use strict";var n=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"PersonalCard"},[e.isAdmin||e.isDelete?t("van-image",{staticClass:"img-style",attrs:{width:"100%",height:"200",fit:"contain",src:e.cardData.identityImg}}):e._e(),t("van-image",{staticClass:"img-style",attrs:{width:"100%",height:"250",fit:"contain",src:e.cardData.userImg}}),t("div",{staticClass:"div-wrapper",staticStyle:{display:"flex","align-items":"center"}},[t("span",{staticClass:"label-style"},[e._v("姓名：")]),e._v(e._s(e.cardData.nickname)+" "),t("van-image",{staticStyle:{"margin-left":"8px"},attrs:{width:"20",height:"20",round:"",src:1===e.cardData.gender?e.male:e.female}})],1),t("div",{staticClass:"div-wrapper"},[t("span",{staticClass:"label-style"},[e._v("学院：")]),e._v(e._s(e.cardData.college)+" ")]),t("div",{staticClass:"div-wrapper"},[t("span",{staticClass:"label-style"},[e._v("出生日期：")]),e._v(e._s(e.cardData.bornDate&&e.moment(e.cardData.bornDate).format("YYYY-MM-DD"))+" ")]),t("div",{staticClass:"div-wrapper"},[t("span",{staticClass:"label-style"},[e._v("身高：")]),e._v(e._s(e.cardData.height)+"cm ")]),t("div",{staticClass:"div-wrapper"},[t("span",{staticClass:"label-style"},[e._v("手机：")]),e._v(e._s(e.cardData.phoneNumber||e.isAdmin?e.cardData.phoneNumber:"保密中...")+" ")]),t("div",{staticClass:"div-wrapper"},[t("span",{staticClass:"label-style"},[e._v("学号：")]),e._v(e._s(e.cardData.schoolNumber||e.isAdmin?e.cardData.schoolNumber:"保密中...")+" ")]),t("div",{staticClass:"div-wrapper"},[t("span",{staticClass:"label-style"},[e._v("QQ/微信：")]),e._v(e._s(e.cardData.qq)+" ")]),t("div",{staticClass:"div-wrapper"},[t("span",{staticClass:"label-style"},[e._v("家乡：")]),e._v(e._s(e.cardData.city)+" ")]),t("div",{staticClass:"div-wrapper"},[t("span",{staticClass:"label-style"},[e._v("兴趣爱好：")]),e._l(e.cardData.hobby,(function(a,n){return t("van-tag",{staticStyle:{margin:"2px"},attrs:{mark:"",color:e.color[n%e.color.length]}},[e._v(" "+e._s(a)+" ")])}))],2),t("div",{staticClass:"div-wrapper"},[t("span",{staticClass:"label-style"},[e._v("个人介绍：")]),e._v(" "+e._s(e.cardData.introduction)+" ")]),e.isAdmin?t("div",{staticClass:"button-wrapper"},[t("van-button",{attrs:{type:"primary",size:"large",round:"",color:"linear-gradient(to right, #37d6b6, #0ac2c9)"},on:{click:function(a){return e.handleActive(!0)}}},[e._v("通过 ")]),t("van-button",{attrs:{type:"danger",size:"large",round:"",color:"linear-gradient(to right, #fd3e30, #ff7d36)"},on:{click:function(a){return e.handleActive(!1)}}},[e._v("不通过 ")])],1):e._e(),e.isDelete?t("van-button",{staticStyle:{"margin-top":"30px"},attrs:{type:"danger",size:"large",round:"",color:"linear-gradient(to right, #42dc84, #02b8e2)"},on:{click:function(a){return e.handleReset()}}},[e._v("重置密码 ")]):e._e(),e.isDelete?t("van-button",{staticStyle:{"margin-top":"30px"},attrs:{type:"danger",size:"large",round:"",color:"linear-gradient(to right, #fd3e30, #ff7d36)"},on:{click:function(a){return e.handleDelete()}}},[e._v("删除 ")]):e._e(),e.isRemove?t("van-button",{staticStyle:{"margin-top":"30px"},attrs:{type:"danger",size:"large",round:"",color:"linear-gradient(to right, #fd3e30, #ff7d36)"},on:{click:function(a){return e.handleRemove()}}},[e._v("移除列表 ")]):e._e()],1)},r=[],s=t("d6a1"),o=t("c32d"),i=["#7232dd","#f2826a","#ff361e","#fa5a5a","#f17db1","#ffcb05","#42dc84","#02b8e2","#a6ce39","#0080ff"],l={name:"PersonalCard",props:{cardData:Object,isAdmin:Boolean,isDelete:Boolean,isRemove:Boolean},data:function(){return{male:t("8880"),female:t("6067"),color:i}},methods:{moment:o,handleActive:function(e){var a=this;s["a"].userController.userActive({userId:this.cardData.userId,code:e?1:2}).then((function(t){t.data.data&&t.data.meta.success?e?a.$toast.success("已通过"):a.$toast.fail("已拒绝"):a.$notify({type:"danger",message:t.data.meta.message}),a.$emit("handleClosePop")}))},handleDelete:function(){var e=this;this.$dialog.confirm({title:"删除",message:"删除后需重新注册，请问确定删除?"}).then((function(){s["a"].userController.deleteUser({userId:e.cardData.userId}).then((function(a){a?a.data.data&&a.data.meta.success?(e.$emit("handleClosePop"),e.$toast.success("已删除")):e.$toast.fail(a.data.meta.message):e.$toast.fail("网络错误")}))})).catch((function(){}))},handleReset:function(){var e=this;this.$dialog.confirm({title:"重置密码",message:"确定重置密码?"}).then((function(){s["a"].userController.resetPassword({userId:e.cardData.userId}).then((function(a){a?(e.$emit("handleClosePop"),e.$toast.success("已重置")):e.$toast.fail(a.data.meta.message)}))})).catch((function(){}))},handleRemove:function(){var e=this;this.$dialog.confirm({title:"移除",message:"确定将其移除我喜欢的列表?"}).then((function(){s["a"].userController.removeLove({userId:e.cardData.userId,love:!0}).then((function(a){a?(e.$emit("handleClosePop"),e.$toast.success("已移除")):e.$toast.fail(a.data.meta.message)}))})).catch((function(){}))}}},c=l,d=(t("ae20"),t("2877")),u=Object(d["a"])(c,n,r,!1,null,"224f0c1d",null);a["a"]=u.exports},3116:function(e,a,t){"use strict";var n=t("3147"),r=t.n(n);r.a},3147:function(e,a,t){},"541d":function(e,a,t){"use strict";t.r(a);var n=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"FirstPage"},[t("van-nav-bar",{attrs:{title:"我的档案","left-text":"返回","left-arrow":""},on:{"click-left":e.onClickLeft}}),t("van-panel",{attrs:{title:"您的信息",desc:"完善的信息让您更加有魅力"}},[t("van-form",{on:{submit:e.onSubmit}},[t("van-field",{attrs:{label:"姓名",required:"",value:e.personalData.nickname,readonly:""},scopedSlots:e._u([{key:"right-icon",fn:function(){return[t("van-image",{attrs:{width:"20",height:"20",round:"",src:1===e.personalData.gender?e.male:e.female}})]},proxy:!0}])}),t("van-field",{attrs:{label:"学号",required:"",value:e.personalData.schoolNumber,readonly:""}}),t("van-field",{attrs:{readonly:"",clickable:"",value:e.personalData.college,label:"学院",required:"",placeholder:"请选择学院",rules:[{required:!0,message:"请选择学院!"}]},on:{click:function(a){e.showCollegePicker=!0}}}),t("van-popup",{attrs:{position:"bottom"},model:{value:e.showCollegePicker,callback:function(a){e.showCollegePicker=a},expression:"showCollegePicker"}},[t("van-picker",{attrs:{"show-toolbar":"","default-index":e.collegeOptions.findIndex((function(a){return a===e.personalData.college})),columns:e.collegeOptions},on:{confirm:e.onCollegeConfirm,cancel:function(a){e.showCollegePicker=!1}}})],1),t("van-field",{attrs:{type:"number",required:"",label:"身高(cm)",placeholder:"请输入身高",rules:[{required:!0,message:"请输入身高!"}]},model:{value:e.personalData.height,callback:function(a){e.$set(e.personalData,"height",a)},expression:"personalData.height"}}),t("van-field",{attrs:{readonly:"",clickable:"",value:e.bornDate,required:"",label:"出生日期",placeholder:"点击选择出生日期"},on:{click:function(a){e.showPicker=!0}}}),t("van-popup",{attrs:{position:"bottom"},model:{value:e.showPicker,callback:function(a){e.showPicker=a},expression:"showPicker"}},[t("van-datetime-picker",{attrs:{type:"date","min-date":e.minDate,"max-date":e.maxDate},on:{confirm:e.onConfirmDate,cancel:function(a){e.showPicker=!1}},model:{value:e.personalData.bornDate,callback:function(a){e.$set(e.personalData,"bornDate",a)},expression:"personalData.bornDate"}})],1),t("van-field",{attrs:{required:"",label:"QQ/微信",placeholder:"请输入QQ或微信",rules:[{required:!0,message:"请输入QQ或微信!"}]},model:{value:e.personalData.qq,callback:function(a){e.$set(e.personalData,"qq",a)},expression:"personalData.qq"}}),t("van-field",{attrs:{required:"",label:"家乡",placeholder:"请输入家乡",rules:[{required:!0,message:"请输入家乡!"}]},model:{value:e.personalData.city,callback:function(a){e.$set(e.personalData,"city",a)},expression:"personalData.city"}}),t("van-field",{attrs:{required:"",label:"手机号",placeholder:"请输入手机号",rules:[{required:!0,message:"请输入手机号!"},{pattern:/^1[3456789]\d{9}$/,message:"手机号格式错误!"}]},model:{value:e.personalData.phoneNumber,callback:function(a){e.$set(e.personalData,"phoneNumber",a)},expression:"personalData.phoneNumber"}}),t("van-field",{attrs:{required:"",label:"兴趣爱好",placeholder:"请选择兴趣爱好",rules:[{required:!0,message:"请选择兴趣爱好!"}]},scopedSlots:e._u([{key:"input",fn:function(){return[t("van-checkbox-group",{attrs:{direction:"horizontal"},model:{value:e.personalData.hobby,callback:function(a){e.$set(e.personalData,"hobby",a)},expression:"personalData.hobby"}},e._l(e.hobbyOption,(function(a){return t("van-checkbox",{key:a,attrs:{name:a}},[e._v(e._s(a))])})),1)]},proxy:!0}])}),t("van-field",{attrs:{clearable:!0,required:"",type:"textarea",rows:"4",label:"自我介绍",placeholder:"请输入自我介绍",maxlength:"220","show-word-limit":"",rules:[{required:!0,message:"请输入自我介绍!",maxLength:20}]},model:{value:e.personalData.introduction,callback:function(a){e.$set(e.personalData,"introduction",a)},expression:"personalData.introduction"}}),t("van-field",{attrs:{required:"",rules:[{required:!0,message:"请上传您的生活照片!"}],label:"上传照片"},scopedSlots:e._u([{key:"input",fn:function(){return[t("van-uploader",{attrs:{multiple:"","max-count":1,"before-read":e.beforeRead},model:{value:e.imgFileList,callback:function(a){e.imgFileList=a},expression:"imgFileList"}})]},proxy:!0}])}),t("div",{staticStyle:{margin:"16px"}},[t("van-button",{attrs:{round:"",block:"",disabled:e.imgLoading||e.isSubmit,loading:e.imgLoading||e.isSubmit,"loading-text":"图片上传中...",type:"info","native-type":"submit"}},[e._v(" 生成档案 ")])],1)],1)],1),t("van-action-sheet",{attrs:{title:"个人卡片"},model:{value:e.cardShow,callback:function(a){e.cardShow=a},expression:"cardShow"}},[t("PersonalCard",{attrs:{cardData:e.personalData}})],1)],1)},r=[],s=t("5880"),o=t("1c9f"),i=t("c32d"),l=t.n(i),c=t("d6a1"),d=t("a750"),u=t("c59a"),p=t("5430"),m=t("6be6"),f=t.n(m),g=t("3118");function h(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function b(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?h(Object(t),!0).forEach((function(a){v(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):h(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function v(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}var D={name:"FirstPage",components:{PersonalCard:o["a"]},data:function(){return{male:t("8880"),female:t("6067"),personalData:{introduction:""},bornDate:"",showPicker:!1,collegeOptions:p["a"],showCollegePicker:!1,minDate:new Date(1975,0,1),maxDate:new Date,hobbyOption:d["a"],imgFileList:[],fileName:"",cardShow:!1,imgLoading:!1,test:"",isSubmit:!1}},mounted:function(){this.getPersonalData()},methods:b(b({},Object(s["mapMutations"])({answerSet:"tokensOperation/answerSet"})),{},{getPersonalData:function(e){var a=this;c["a"].userController.getUserData().then((function(t){t?(a.personalData=t.data.data,a.personalData.introduction=a.personalData.introduction||"",a.personalData.hobby=t.data.data.hobby?t.data.data.hobby.split(","):[],a.personalData.bornDate=a.personalData.bornDate&&new Date(a.personalData.bornDate),a.bornDate=t.data.data.bornDate&&l()(t.data.data.bornDate).format("YYYY-MM-DD"),a.answerSet(t.data.data.answer),a.personalData.userImg&&(a.fileName=a.personalData.userImg,a.imgFileList=[],a.imgFileList.push({url:a.personalData.userImg,status:"done"})),e&&(a.cardShow=!0)):a.$notify({type:"danger",message:"网络错误"})}))},onConfirmDate:function(e){this.bornDate=l()(e).format("YYYY-MM-DD"),this.showPicker=!1},beforeRead:function(e){var a=this;return new Promise((function(t,n){"image/png"===e.type||"image/jpg"===e.type||"image/jpeg"===e.type?(a.imgLoading=!0,f()(e).then((function(r){var s=new FormData,o=[Object(g["a"])(r.base64,"user."+r.origin.name.split(".")[1])];o.forEach((function(e){s.append("multipartFiles",e)})),c["a"].userController.uploadAvatar(s).then((function(n){a.fileName=u["a"].serverBaseController+n.data.data,a.$notify({type:"success",message:"照片已上传"}),t(e),a.imgLoading=!1})).catch((function(e){a.$notify({type:"danger",message:"上传失败"}),n()}))})).catch((function(e){this.$notify({type:"danger",message:"图片压缩失败"})}))):(a.$toast("请上传.jpg/.png/.jpeg格式图片"),n())}))},onSubmit:function(){var e=this;this.isSubmit=!0;var a=JSON.parse(JSON.stringify(this.personalData));a.hobby=a.hobby.join(","),a.userImg=this.fileName,a.bornDate=l()(a.bornDate).format("YYYY-MM-DD"),c["a"].userController.verifyUser(a).then((function(a){a&&a.data.meta.success?(e.$notify({type:"success",message:"档案生成成功"}),e.getPersonalData(!0)):e.$notify({type:"danger",message:a.data.meta.message}),e.isSubmit=!1})).catch((function(){e.$notify({type:"danger",message:"网络超时"})}))},onClickLeft:function(){this.$router.push({path:"/mobile/stage"})},onCollegeConfirm:function(e){this.personalData.college=e,this.showCollegePicker=!1}})},y=D,w=(t("3116"),t("2877")),C=Object(w["a"])(y,n,r,!1,null,"2835e676",null);a["default"]=C.exports},5430:function(e,a,t){"use strict";var n=["数学与统计学院","物理学院","化学与化工学院","机械科学与工程学院","材料科学与工程学院","能源与动力工程学院","中欧能源学院","航空航天学院","电气与电子工程学院","船舶与海洋工程学院","力学系","生命科学与技术学院","电子信息与通信学院","光学与电子信息学院","人工智能与自动化学院","武汉光电国家研究中心","计算机科学与技术学院","建筑与城市规划学院","土木工程与力学学院","环境科学与工程学院","水电与数字化工程学院","管理学院","MBA中心","MPAcc中心","经济学院","附属武汉儿童医院","人文学院","法学院","法律硕士中心","社会学院","公共管理学院","MPA中心","马克思主义学院","外国语学院","教育科学研究院","体育部","软件学院","新闻与信息传播学院","基础医学院","公共卫生学院","药学院","法医学系","医药卫生管理学院","护理学院","计划生育研究所","附属协和医院","附属同济医院","附属梨园医院","网络空间安全学院"];a["a"]=n},6067:function(e,a,t){e.exports=t.p+"img/female.2ec0578c.png"},8880:function(e,a,t){e.exports=t.p+"img/male.ab8cf6ca.png"},a750:function(e,a,t){"use strict";var n=["书法","文学","乐器","舞蹈","游戏","影视","美食","旅游","社交","歌唱","阅读","下棋"];a["a"]=n},ae20:function(e,a,t){"use strict";var n=t("e731"),r=t.n(n);r.a},e731:function(e,a,t){}}]);