(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-72148945"],{"1c9f":function(t,a,e){"use strict";var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"PersonalCard"},[t.isAdmin||t.isDelete?e("van-image",{staticClass:"img-style",attrs:{width:"100%",height:"200",fit:"contain",src:t.cardData.identityImg}}):t._e(),e("van-image",{staticClass:"img-style",attrs:{width:"100%",height:"250",fit:"contain",src:t.cardData.userImg}}),e("div",{staticClass:"div-wrapper",staticStyle:{display:"flex","align-items":"center"}},[e("span",{staticClass:"label-style"},[t._v("姓名：")]),t._v(t._s(t.cardData.nickname)+" "),e("van-image",{staticStyle:{"margin-left":"8px"},attrs:{width:"20",height:"20",round:"",src:1===t.cardData.gender?t.male:t.female}})],1),e("div",{staticClass:"div-wrapper"},[e("span",{staticClass:"label-style"},[t._v("学院：")]),t._v(t._s(t.cardData.college)+" ")]),e("div",{staticClass:"div-wrapper"},[e("span",{staticClass:"label-style"},[t._v("出生日期：")]),t._v(t._s(t.cardData.bornDate&&t.moment(t.cardData.bornDate).format("YYYY-MM-DD"))+" ")]),e("div",{staticClass:"div-wrapper"},[e("span",{staticClass:"label-style"},[t._v("手机：")]),t._v(t._s(t.cardData.phoneNumber||t.isAdmin?t.cardData.phoneNumber:"保密中...")+" ")]),e("div",{staticClass:"div-wrapper"},[e("span",{staticClass:"label-style"},[t._v("学号：")]),t._v(t._s(t.cardData.schoolNumber||t.isAdmin?t.cardData.schoolNumber:"保密中...")+" ")]),e("div",{staticClass:"div-wrapper"},[e("span",{staticClass:"label-style"},[t._v("QQ/微信：")]),t._v(t._s(t.cardData.qq)+" ")]),e("div",{staticClass:"div-wrapper"},[e("span",{staticClass:"label-style"},[t._v("家乡：")]),t._v(t._s(t.cardData.city)+" ")]),e("div",{staticClass:"div-wrapper"},[e("span",{staticClass:"label-style"},[t._v("兴趣爱好：")]),t._l(t.cardData.hobby,(function(a,n){return e("van-tag",{staticStyle:{margin:"2px"},attrs:{mark:"",color:t.color[n%t.color.length]}},[t._v(" "+t._s(a)+" ")])}))],2),e("div",{staticClass:"div-wrapper"},[e("span",{staticClass:"label-style"},[t._v("个人介绍：")]),t._v(" "+t._s(t.cardData.introduction)+" ")]),t.isAdmin?e("div",{staticClass:"button-wrapper"},[e("van-button",{attrs:{type:"primary",size:"large",round:"",color:"linear-gradient(to right, #37d6b6, #0ac2c9)"},on:{click:function(a){return t.handleActive(!0)}}},[t._v("通过 ")]),e("van-button",{attrs:{type:"danger",size:"large",round:"",color:"linear-gradient(to right, #fd3e30, #ff7d36)"},on:{click:function(a){return t.handleActive(!1)}}},[t._v("不通过 ")])],1):t._e(),t.isDelete?e("van-button",{staticStyle:{"margin-top":"30px"},attrs:{type:"danger",size:"large",round:"",color:"linear-gradient(to right, #fd3e30, #ff7d36)"},on:{click:function(a){return t.handleDelete()}}},[t._v("删除 ")]):t._e()],1)},i=[],s=e("d6a1"),r=e("c32d"),o=["#7232dd","#f2826a","#ff361e","#fa5a5a","#f17db1","#ffcb05","#42dc84","#02b8e2","#a6ce39","#0080ff"],c={name:"PersonalCard",props:{cardData:Object,isAdmin:Boolean,isDelete:Boolean},data:function(){return{male:e("8880"),female:e("6067"),color:o}},methods:{moment:r,handleActive:function(t){var a=this;s["a"].userController.userActive({userId:this.cardData.userId,code:t?1:2}).then((function(e){e.data.data&&e.data.meta.success?t?a.$toast.success("已通过"):a.$toast.fail("已拒绝"):a.$notify({type:"danger",message:e.data.meta.message}),a.$emit("handleClosePop")}))},handleDelete:function(){var t=this;this.$dialog.confirm({title:"删除",message:"删除后需重新注册，请问确定删除?"}).then((function(){s["a"].userController.deleteUser({userId:t.cardData.userId}).then((function(a){a?a.data.data&&a.data.meta.success?(t.$emit("handleClosePop"),t.$toast.success("已删除")):t.$toast.fail(a.data.meta.message):t.$toast.fail("网络错误")}))})).catch((function(){}))}}},l=c,d=(e("cb97"),e("2877")),p=Object(d["a"])(l,n,i,!1,null,"f7e14d90",null);a["a"]=p.exports},"3a1a":function(t,a,e){},"5f08":function(t,a,e){},6067:function(t,a,e){t.exports=e.p+"img/female.2ec0578c.png"},"79e8":function(t,a,e){"use strict";var n=e("5f08"),i=e.n(n);i.a},8819:function(t,a,e){"use strict";var n=e("9a48"),i=e.n(n);i.a},8880:function(t,a,e){t.exports=e.p+"img/male.ab8cf6ca.png"},9255:function(t,a,e){"use strict";var n=e("a963"),i=e.n(n);i.a},"9a48":function(t,a,e){},a963:function(t,a,e){},c1a2:function(t,a,e){"use strict";e.r(a);var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"AdminPage"},[e("van-nav-bar",{attrs:{title:"管理中心","left-text":"返回","left-arrow":""},on:{"click-left":t.onClickLeft}}),e("div",{staticClass:"tab-content"},[e("keep-alive",[e(t.currentTabComponent,{tag:"component"})],1)],1),e("van-tabbar",{model:{value:t.currentTabComponent,callback:function(a){t.currentTabComponent=a},expression:"currentTabComponent"}},[e("van-tabbar-item",{attrs:{name:"ActivePage",icon:"friends",badge:t.pagingOption.badge}},[t._v("激活审核")]),e("van-tabbar-item",{attrs:{name:"ManagementPage",icon:"fire"}},[t._v("用户管理")])],1)],1)},i=[],s=e("5880"),r=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"ActivePage"},[e("form",{attrs:{action:"/"}},[e("van-search",{attrs:{placeholder:"搜索关键词：姓名或学号"},on:{search:t.onSearch,cancel:t.onCancel},model:{value:t.searchValue,callback:function(a){t.searchValue=a},expression:"searchValue"}}),e("div",{staticClass:"list-wrapper"},[e("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(a){t.loading=a},expression:"loading"}},[e("van-cell-group",t._l(t.list,(function(a,n){return e("van-cell",{key:n,attrs:{"is-link":""},on:{click:function(a){return t.showCard(n)}},scopedSlots:t._u([{key:"title",fn:function(){return[e("div",{staticClass:"name-style"},[1===a.gender?e("van-tag",{attrs:{type:"primary"}},[t._v(t._s(a.nickname))]):e("van-tag",{attrs:{color:"#f19ec2"}},[t._v(t._s(a.nickname))])],1),e("span",{staticClass:"list-title"},[t._v(t._s(a.schoolNumber))]),e("span",{staticClass:"list-title"},[t._v(t._s(a.college))])]},proxy:!0}],null,!0)})})),1)],1)],1)],1),e("van-action-sheet",{attrs:{title:"个人卡片"},model:{value:t.cardShow,callback:function(a){t.cardShow=a},expression:"cardShow"}},[e("PersonalCard",{attrs:{cardData:t.personalData,isAdmin:!0},on:{handleClosePop:t.handleClosePop}})],1)],1)},o=[],c=e("1c9f"),l=e("d6a1");function d(t,a){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable}))),e.push.apply(e,n)}return e}function p(t){for(var a=1;a<arguments.length;a++){var e=null!=arguments[a]?arguments[a]:{};a%2?d(Object(e),!0).forEach((function(a){u(t,a,e[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):d(Object(e)).forEach((function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(e,a))}))}return t}function u(t,a,e){return a in t?Object.defineProperty(t,a,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[a]=e,t}var g={name:"ActivePage",components:{PersonalCard:c["a"]},data:function(){return{searchValue:"",list:[],loading:!1,finished:!1,cardShow:!1,personalData:{}}},computed:p({},Object(s["mapState"])({pagingOption:function(t){return t.userOperation.pagingOption}})),activated:function(){this.pagingOption.pageNum=1},methods:{onSearch:function(t){this.list=[],this.pagingOption.pageNum=1,this.pagingOption.totalNum=null,this.searchValue=t,this.onLoad()},onCancel:function(){},onLoad:function(){var t=this;this.loading=!0,l["a"].userController.getUserListUnable({nickname:this.searchValue,pageNum:this.pagingOption.pageNum,pageLimit:this.pagingOption.pageLimit}).then((function(a){a?a.data.data&&a.data.meta.success?(t.pagingOption.totalNum=a.data.data.totalElements,t.searchValue||(t.pagingOption.badge=a.data.data.totalElements),a.data.data.content.map((function(a){t.list.push(a)})),t.list.length>=t.pagingOption.totalNum?t.finished=!0:(t.pagingOption.pageNum++,t.finished=!1),t.loading=!1):t.$notify({type:"danger",message:a.data.meta.message}):(t.$notify({type:"danger",message:"网络超时"}),t.finished=!0)}))},showCard:function(t){var a=JSON.parse(JSON.stringify(this.list[t]));a.hobby=a.hobby&&a.hobby.split(","),this.cardShow=!0,this.personalData=a},handleClosePop:function(){this.cardShow=!1,this.onSearch("")}}},f=g,h=(e("8819"),e("2877")),m=Object(h["a"])(f,r,o,!1,null,"369d9e14",null),v=m.exports,b=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"ManagementPage"},[e("form",{attrs:{action:"/"}},[e("van-search",{attrs:{placeholder:"搜索关键词：姓名或学号"},on:{search:t.onSearch,cancel:t.onCancel},model:{value:t.searchValue,callback:function(a){t.searchValue=a},expression:"searchValue"}}),e("div",{staticClass:"list-wrapper"},[e("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(a){t.loading=a},expression:"loading"}},[e("van-cell-group",t._l(t.list,(function(a,n){return e("van-cell",{key:n,attrs:{"is-link":""},on:{click:function(a){return t.showCard(n)}},scopedSlots:t._u([{key:"title",fn:function(){return[e("div",{staticClass:"name-style"},[1===a.gender?e("van-tag",{attrs:{type:"primary"}},[t._v(t._s(a.nickname))]):e("van-tag",{attrs:{color:"#f19ec2"}},[t._v(t._s(a.nickname))])],1),e("span",{staticClass:"list-title"},[t._v(t._s(a.schoolNumber))]),e("span",{staticClass:"list-title"},[t._v(t._s(a.college))])]},proxy:!0}],null,!0)})})),1)],1)],1)],1),e("van-action-sheet",{attrs:{title:"个人卡片"},model:{value:t.cardShow,callback:function(a){t.cardShow=a},expression:"cardShow"}},[e("PersonalCard",{attrs:{cardData:t.personalData,isDelete:!0},on:{handleClosePop:t.handleClosePop}})],1)],1)},y=[],O={name:"ManagementPage",components:{PersonalCard:c["a"]},data:function(){return{searchValue:"",list:[],loading:!1,finished:!1,cardShow:!1,personalData:{},pagingOption:{pageNum:1,pageLimit:6,totalNum:null}}},activated:function(){this.pagingOption.pageNum=1},methods:{onSearch:function(t){this.list=[],this.pagingOption.pageNum=1,this.pagingOption.totalNum=null,this.searchValue=t,this.onLoad()},onCancel:function(){},onLoad:function(){var t=this;this.loading=!0,l["a"].userController.getUserListByNameLike({nickname:this.searchValue,pageNum:this.pagingOption.pageNum,pageLimit:this.pagingOption.pageLimit}).then((function(a){a?a.data.data&&a.data.meta.success?(t.pagingOption.totalNum=a.data.data.totalElements,t.searchValue||(t.pagingOption.badge=a.data.data.totalElements),a.data.data.content.map((function(a){t.list.push(a)})),t.list.length>=t.pagingOption.totalNum?t.finished=!0:(t.pagingOption.pageNum++,t.finished=!1),t.loading=!1):t.$notify({type:"danger",message:a.data.meta.message}):t.$notify({type:"danger",message:"网络超时"})}))},showCard:function(t){var a=JSON.parse(JSON.stringify(this.list[t]));a.hobby=a.hobby&&a.hobby.split(","),this.cardShow=!0,this.personalData=a},handleClosePop:function(){this.cardShow=!1,this.onSearch(this.searchValue)}}},C=O,_=(e("9255"),Object(h["a"])(C,b,y,!1,null,"0b45564e",null)),w=_.exports;function D(t,a){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable}))),e.push.apply(e,n)}return e}function P(t){for(var a=1;a<arguments.length;a++){var e=null!=arguments[a]?arguments[a]:{};a%2?D(Object(e),!0).forEach((function(a){k(t,a,e[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):D(Object(e)).forEach((function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(e,a))}))}return t}function k(t,a,e){return a in t?Object.defineProperty(t,a,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[a]=e,t}var S={name:"AdminPage",components:{ActivePage:v,ManagementPage:w},data:function(){return{currentTabComponent:"ActivePage"}},computed:P({},Object(s["mapState"])({pagingOption:function(t){return t.userOperation.pagingOption}})),methods:{onClickLeft:function(){this.$router.go(-1)}}},j=S,N=(e("79e8"),Object(h["a"])(j,n,i,!1,null,"ee9cc122",null));a["default"]=N.exports},cb97:function(t,a,e){"use strict";var n=e("3a1a"),i=e.n(n);i.a}}]);