(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-920952b4"],{"1a7b":function(e,r,t){"use strict";t.r(r);var a=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"LoginPage"},[t("div",{staticClass:"operation-wrapper"},[t("div",{staticClass:"title-wrapper"},[e._v("沐光遇法 语你相识")]),t("a-tabs",{model:{value:e.activeKey,callback:function(r){e.activeKey=r},expression:"activeKey"}},[t("a-tab-pane",{key:"1",staticClass:"pane-style",attrs:{tab:"登录"}},[t("a-form",{attrs:{form:e.LoginForm,"label-col":{span:5},"wrapper-col":{span:15}},on:{submit:e.handleLogin}},[t("a-form-item",{attrs:{label:"账号"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["userName",{rules:[{required:!0,message:"请输入账号!"}]}],expression:"[\n        'userName',\n        { rules: [{ required: true, message: '请输入账号!' }] },\n      ]"}],attrs:{placeholder:"请输入账号"}},[t("a-icon",{staticStyle:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"user"},slot:"prefix"})],1)],1),t("a-form-item",{attrs:{label:"密码"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["password",{rules:[{required:!0,message:"请输入密码!"}]}],expression:"[\n        'password',\n        { rules: [{ required: true, message: '请输入密码!' }] },\n      ]"}],attrs:{type:"password",placeholder:"请输入密码"}},[t("a-icon",{staticStyle:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"lock"},slot:"prefix"})],1)],1),t("a-form-item",{attrs:{"wrapper-col":{span:12,offset:5}}},[t("a-button",{attrs:{type:"primary","html-type":"submit"}},[e._v(" 登录 ")])],1)],1)],1),t("a-tab-pane",{key:"2",staticClass:"pane-style",attrs:{tab:"注册"}},[t("a-form",{attrs:{form:e.RegisterForm,"label-col":{span:5},"wrapper-col":{span:15}},on:{submit:e.handleRegister}},[t("a-form-item",{attrs:{label:"姓名"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["nickname",{rules:[{required:!0,message:"请输入真实姓名!"}]}],expression:"[\n        'nickname',\n        { rules: [{ required: true, message: '请输入真实姓名!' }] },\n      ]"}],attrs:{placeholder:"请输入真实姓名"}},[t("a-icon",{staticStyle:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"reddit"},slot:"prefix"})],1)],1),t("a-form-item",{attrs:{label:"学号"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["schoolNumber",{rules:[{required:!0,message:"请输入学号!"},{pattern:/^[a-zA-Z]\d{9}$/,message:"格式错误，例如：M201973007"}]}],expression:"[\n        'schoolNumber',\n        { rules: [{ required: true, message: '请输入学号!' },\n        { pattern: /^[a-zA-Z]\\d{9}$/, message: '格式错误，例如：M201973007' }] },\n      ]"}],attrs:{placeholder:"请输入真实学号"}},[t("a-icon",{staticStyle:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"number"},slot:"prefix"})],1)],1),t("a-form-item",{attrs:{label:"账号"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["username",{rules:[{required:!0,message:"请输入登录账号!"}]}],expression:"[\n        'username',\n        { rules: [{ required: true, message: '请输入登录账号!' }] },\n      ]"}],attrs:{placeholder:"请输入登录账号"}},[t("a-icon",{staticStyle:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"user"},slot:"prefix"})],1)],1),t("a-form-item",{attrs:{label:"密码"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["password",{rules:[{required:!0,message:"请输入密码!"}]}],expression:"[\n        'password',\n        { rules: [{ required: true, message: '请输入密码!' }] },\n      ]"}],attrs:{type:"password",placeholder:"请输入密码"}},[t("a-icon",{staticStyle:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"lock"},slot:"prefix"})],1)],1),t("a-form-item",{attrs:{label:"性别"}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["gender",{rules:[{required:!0,message:"请选择您的性别!"}]}],expression:"[\n        'gender',\n        { rules: [{ required: true, message: '请选择您的性别!' }] },\n      ]"}],attrs:{placeholder:"请选择您的性别"}},[t("a-select-option",{attrs:{value:1}},[e._v(" 男 ")]),t("a-select-option",{attrs:{value:0}},[e._v(" 女 ")])],1)],1),t("a-form-item",{attrs:{label:"身份证明"}},[t("a-upload",{directives:[{name:"decorator",rawName:"v-decorator",value:["uploadFile",{getValueFromEvent:e.normFile,rules:[{required:!0,message:"请上传学生证或校园卡正面!"}]}],expression:"[\n        'uploadFile',\n        {\n          getValueFromEvent: normFile,\n          rules: [{ required: true, message: '请上传学生证或校园卡正面!' }]\n        },\n      ]"}],attrs:{fileList:e.imgFileList,beforeUpload:e.beforeUpload,remove:e.handleRemove,multiple:!1}},[t("a-button",[t("a-icon",{attrs:{type:"upload"}}),e._v(" 学生证或校园卡正面 ")],1)],1)],1),t("a-form-item",{attrs:{"wrapper-col":{span:12,offset:5}}},[t("a-button",{attrs:{type:"primary","html-type":"submit",loading:e.uploadSpinning}},[e._v(" 注册 ")])],1)],1)],1)],1)],1)])},s=[],i=t("5880"),o=t("d6a1"),n=t("6be6"),l=t.n(n),u=t("c59a"),c=t("3118");function p(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,a)}return t}function m(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?p(Object(t),!0).forEach((function(r){d(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):p(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function d(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var g={name:"LoginPage",data:function(){return{activeKey:"1",formLayout:"horizontal",LoginForm:this.$form.createForm(this),RegisterForm:this.$form.createForm(this),imgFileList:[],uploadSpinning:!1,fileName:""}},methods:m(m({},Object(i["mapActions"])({login:"tokensOperation/login",registerUser:"userOperation/registerUser"})),{},{handleLogin:function(e){var r=this;e.preventDefault(),this.LoginForm.validateFields((function(e,t){e||r.login({username:t.userName,password:t.password}).then((function(e){e&&e.data.meta.success?(r.$message.success("登录成功"),r.$router.push({path:"/pc/stage"})):r.$message.warning(e.data.meta.message)}))}))},handleRegister:function(e){var r=this;e.preventDefault(),this.RegisterForm.validateFields((function(e,t){if(!e){var a={nickname:t.nickname,schoolNumber:t.schoolNumber,username:t.username,password:t.password,gender:t.gender,identifyImg:r.fileName};o["a"].userController.registerUser(a).then((function(e){e&&e.data.meta.success?(r.$message.success("注册成功，请登录！"),r.activeKey="1",r.RegisterForm.resetFields()):r.$message.warning(e.data.meta.message)}))}}))},normFile:function(e){return Array.isArray(e)?e:e&&e.fileList},handleRemove:function(e){var r=this.imgFileList.indexOf(e),t=this.imgFileList.slice();t.splice(r,1),this.imgFileList=t,this.RegisterForm.setFieldsValue({uploadFile:null})},beforeUpload:function(e){var r=this;return this.uploadSpinning=!0,"image/png"===e.type||"image/jpg"===e.type||"image/jpeg"===e.type?l()(e).then((function(t){var a=new FormData,s=[Object(c["a"])(t.base64,"identify."+t.origin.name.split(".")[1])];s.forEach((function(e){a.append("multipartFiles",e)})),o["a"].userController.uploadAvatar(a).then((function(t){r.fileName=u["a"].serverBaseController+t.data.data,r.handleRemove(e),r.imgFileList.push({uid:"-1",name:"image",status:"done",url:r.fileName}),r.RegisterForm.setFieldsValue({uploadFile:r.imgFileList}),r.$message.success("照片已上传"),r.uploadSpinning=!1})).catch((function(e){r.$message.error("上传失败"),r.uploadSpinning=!1}))})).catch((function(e){this.$message.error("压缩失败！")})):(this.$message.error("只能上传.jpg.jpeg.png类型文件"),this.uploadSpinning=!1),!1}})},f=g,v=(t("ebd6"),t("2877")),b=Object(v["a"])(f,a,s,!1,null,"31a235e6",null);r["default"]=b.exports},"91f5":function(e,r,t){},ebd6:function(e,r,t){"use strict";var a=t("91f5"),s=t.n(a);s.a}}]);