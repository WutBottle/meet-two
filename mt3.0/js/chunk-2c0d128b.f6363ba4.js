(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2c0d128b"],{"1c9f":function(e,a,t){"use strict";var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"PersonalCard"},[t("van-image",{attrs:{width:"100%",height:"250",fit:"contain",src:e.cardData.userImg}}),t("div",{staticStyle:{padding:"12px 20px"}},[t("van-row",{attrs:{gutter:"12"}},[t("van-col",{attrs:{span:"12"}},[t("div",{staticClass:"div-wrapper"},[e._v(" 姓名："+e._s(e.cardData.nickname)+" "),t("van-image",{staticStyle:{"margin-left":"8px"},attrs:{width:"20",height:"20",round:"",src:1===e.cardData.gender?e.male:e.female}})],1),t("div",{staticClass:"div-wrapper"},[e._v(" 学院："+e._s(e.cardData.college)+" ")]),t("div",{staticClass:"div-wrapper"},[e._v(" 出生日期："+e._s(e.cardData.bornDate&&e.moment(e.cardData.bornDate).format("YYYY-MM-DD"))+" ")]),t("div",{staticClass:"div-wrapper"},[e._v(" 手机："+e._s(e.cardData.phoneNumber)+" ")])]),t("van-col",{attrs:{span:"12"}},[t("div",{staticClass:"div-wrapper"},[e._v(" 学号："+e._s(e.cardData.schoolNumber)+" ")]),t("div",{staticClass:"div-wrapper"},[e._v(" QQ/微信："+e._s(e.cardData.qq)+" ")]),t("div",{staticClass:"div-wrapper"},[e._v(" 家乡："+e._s(e.cardData.city)+" ")])])],1),t("van-row",[e._v(" 兴趣爱好： "),e._l(e.cardData.hobby,(function(a,r){return t("van-tag",{staticStyle:{margin:"2px"},attrs:{mark:"",color:e.color[r%e.color.length]}},[e._v(" "+e._s(a)+" ")])}))],2),t("van-row",{staticStyle:{"line-height":"20px",padding:"8px 0"}},[e._v(" 个人介绍： "+e._s(e.cardData.introduction)+" ")])],1),e.isAdmin?t("div",{staticClass:"button-wrapper"},[t("van-button",{attrs:{type:"primary",size:"large"},on:{click:function(a){return e.handleActive(!0)}}},[e._v("通过")]),t("van-button",{attrs:{type:"danger",size:"large"},on:{click:function(a){return e.handleActive(!1)}}},[e._v("不通过")])],1):e._e()],1)},n=[],o=t("d6a1"),i=t("c1df"),s=t.n(i),l=["#7232dd","#f2826a","#ff361e","#f6941d","#fa5a5a","#f0d264","#82c8a0","#7fccde","#6698cb","#cb99c5","#0080ff"],c={name:"PersonalCard",props:{cardData:Object,isAdmin:Boolean},data:function(){return{male:t("8880"),female:t("6067"),color:l}},methods:{moment:s.a,handleActive:function(e){var a=this;o["a"].userController.userActive({userId:this.cardData.userId,code:1}).then((function(t){t.data.data&&t.data.meta.success?e?a.$toast.success("已通过"):a.$toast.fail("已拒绝"):a.$notify({type:"danger",message:t.data.meta.message}),a.$emit("handleClosePop")}))}}},u=c,d=(t("885f"),t("2877")),p=Object(d["a"])(u,r,n,!1,null,"344581df",null);a["a"]=p.exports},"2c11":function(e,a,t){"use strict";var r=t("b12d"),n=t.n(r);n.a},"541d":function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"FirstPage"},[t("van-nav-bar",{attrs:{title:"我的档案","left-text":"返回","left-arrow":""},on:{"click-left":e.onClickLeft}}),t("van-panel",{attrs:{title:"您的信息",desc:"完善的信息让您更加有魅力"}},[t("van-form",{on:{submit:e.onSubmit}},[t("van-field",{attrs:{label:"姓名",required:"",value:e.personalData.nickname,readonly:""},scopedSlots:e._u([{key:"right-icon",fn:function(){return[t("van-image",{attrs:{width:"20",height:"20",round:"",src:1===e.personalData.gender?e.male:e.female}})]},proxy:!0}])}),t("van-field",{attrs:{label:"学号",required:"",value:e.personalData.schoolNumber,readonly:""}}),t("van-field",{attrs:{readonly:"",clickable:"",value:e.personalData.college,label:"学院",required:"",placeholder:"请选择学院",rules:[{required:!0,message:"请选择学院!"}]},on:{click:function(a){e.showCollegePicker=!0}}}),t("van-popup",{attrs:{position:"bottom"},model:{value:e.showCollegePicker,callback:function(a){e.showCollegePicker=a},expression:"showCollegePicker"}},[t("van-picker",{attrs:{"show-toolbar":"","default-index":e.collegeOptions.findIndex((function(a){return a===e.personalData.college})),columns:e.collegeOptions},on:{confirm:e.onCollegeConfirm,cancel:function(a){e.showCollegePicker=!1}}})],1),t("van-field",{attrs:{type:"number",required:"",label:"身高(cm)",placeholder:"请输入身高",rules:[{required:!0,message:"请输入身高!"}]},model:{value:e.personalData.height,callback:function(a){e.$set(e.personalData,"height",a)},expression:"personalData.height"}}),t("van-field",{attrs:{readonly:"",clickable:"",value:e.bornDate,required:"",label:"出生日期",placeholder:"点击选择出生日期"},on:{click:function(a){e.showPicker=!0}}}),t("van-popup",{attrs:{position:"bottom"},model:{value:e.showPicker,callback:function(a){e.showPicker=a},expression:"showPicker"}},[t("van-datetime-picker",{attrs:{type:"date","min-date":e.minDate,"max-date":e.maxDate},on:{confirm:e.onConfirmDate,cancel:function(a){e.showPicker=!1}},model:{value:e.personalData.bornDate,callback:function(a){e.$set(e.personalData,"bornDate",a)},expression:"personalData.bornDate"}})],1),t("van-field",{attrs:{required:"",label:"QQ/微信",placeholder:"请输入QQ或微信",rules:[{required:!0,message:"请输入QQ或微信!"}]},model:{value:e.personalData.qq,callback:function(a){e.$set(e.personalData,"qq",a)},expression:"personalData.qq"}}),t("van-field",{attrs:{required:"",label:"家乡",placeholder:"请输入家乡",rules:[{required:!0,message:"请输入家乡!"}]},model:{value:e.personalData.city,callback:function(a){e.$set(e.personalData,"city",a)},expression:"personalData.city"}}),t("van-field",{attrs:{required:"",label:"手机号",placeholder:"请输入手机号",rules:[{required:!0,message:"请输入手机号!"},{pattern:/^1[3456789]\d{9}$/,message:"手机号格式错误!"}]},model:{value:e.personalData.phoneNumber,callback:function(a){e.$set(e.personalData,"phoneNumber",a)},expression:"personalData.phoneNumber"}}),t("van-field",{attrs:{required:"",label:"兴趣爱好",placeholder:"请选择兴趣爱好",rules:[{required:!0,message:"请选择兴趣爱好!"}]},scopedSlots:e._u([{key:"input",fn:function(){return[t("van-checkbox-group",{attrs:{direction:"horizontal"},model:{value:e.personalData.hobby,callback:function(a){e.$set(e.personalData,"hobby",a)},expression:"personalData.hobby"}},e._l(e.hobbyOption,(function(a){return t("van-checkbox",{key:a,attrs:{name:a}},[e._v(e._s(a))])})),1)]},proxy:!0}])}),t("van-field",{attrs:{clearable:!0,required:"",type:"textarea",rows:"4",label:"自我介绍",placeholder:"请输入自我介绍",rules:[{required:!0,message:"请输入自我介绍!"}]},model:{value:e.personalData.introduction,callback:function(a){e.$set(e.personalData,"introduction",a)},expression:"personalData.introduction"}}),t("van-field",{attrs:{required:"",rules:[{required:!0,message:"请上传您的生活照片!"}],label:"上传照片"},scopedSlots:e._u([{key:"input",fn:function(){return[t("van-uploader",{attrs:{multiple:"","max-count":1,"before-read":e.beforeRead},model:{value:e.imgFileList,callback:function(a){e.imgFileList=a},expression:"imgFileList"}})]},proxy:!0}])}),t("div",{staticStyle:{margin:"16px"}},[t("van-button",{attrs:{round:"",block:"",loading:e.imgLoading,"loading-text":"图片上传中...",type:"info","native-type":"submit"}},[e._v(" 生成档案 ")])],1)],1)],1),t("van-action-sheet",{attrs:{title:"个人卡片"},model:{value:e.cardShow,callback:function(a){e.cardShow=a},expression:"cardShow"}},[t("PersonalCard",{attrs:{cardData:e.personalData}})],1)],1)},n=[],o=t("1c9f"),i=t("c1df"),s=t.n(i),l=t("d6a1"),c=t("a750"),u=t("c59a"),d=t("5430");function p(e){return v(e)||b(e)||m(e)||f()}function f(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function m(e,a){if(e){if("string"===typeof e)return g(e,a);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?g(e,a):void 0}}function b(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function v(e){if(Array.isArray(e))return g(e)}function g(e,a){(null==a||a>e.length)&&(a=e.length);for(var t=0,r=new Array(a);t<a;t++)r[t]=e[t];return r}var h={name:"FirstPage",components:{PersonalCard:o["a"]},data:function(){return{male:t("8880"),female:t("6067"),personalData:{},bornDate:"",showPicker:!1,collegeOptions:d["a"],showCollegePicker:!1,minDate:new Date(1975,0,1),maxDate:new Date,hobbyOption:c["a"],imgFileList:[],fileName:"",cardShow:!1,imgLoading:!1}},mounted:function(){this.getPersonalData()},methods:{getPersonalData:function(e){var a=this;l["a"].userController.getUserData().then((function(t){t&&(a.personalData=t.data.data,a.personalData.hobby=t.data.data.hobby?t.data.data.hobby.split(","):[],a.personalData.bornDate=a.personalData.bornDate&&new Date(a.personalData.bornDate),a.bornDate=t.data.data.bornDate&&s()(t.data.data.bornDate).format("YYYY-MM-DD"),a.personalData.userImg&&(a.fileName=a.personalData.userImg,a.imgFileList=[],a.imgFileList.push({url:a.personalData.userImg,status:"done"})),e&&(a.cardShow=!0))}))},onConfirmDate:function(e){this.bornDate=s()(e).format("YYYY-MM-DD"),this.showPicker=!1},beforeRead:function(e){var a=this;return new Promise((function(t,r){if("image/png"===e.type||"image/jpg"===e.type||"image/jpeg"===e.type){a.imgLoading=!0;var n=new FormData,o=[];o=[].concat(p(a.imgFileList),[e]),o.forEach((function(e){n.append("multipartFiles",e)})),l["a"].userController.uploadAvatar(n).then((function(r){a.fileName=u["a"].serverBaseController+r.data.data,a.$notify({type:"success",message:"照片已上传"}),a.imgLoading=!1,t(e)})).catch((function(e){a.$notify({type:"error",message:"上传失败"}),r()}))}else a.$toast("请上传.jpg/.png/.jpeg格式图片"),r()}))},onSubmit:function(){var e=this,a=JSON.parse(JSON.stringify(this.personalData));a.hobby=a.hobby.join(","),a.userImg=this.fileName,a.bornDate=s()(a.bornDate).format("YYYY-MM-DD"),l["a"].userController.verifyUser(a).then((function(a){a&&a.data.meta.success?(e.$notify({type:"success",message:"档案生成成功"}),e.getPersonalData(!0)):e.$notify({type:"error",message:a.data.meta.message})}))},onClickLeft:function(){this.$router.push({path:"/mobile/stage"})},onCollegeConfirm:function(e){this.personalData.college=e,this.showCollegePicker=!1}}},D=h,y=(t("2c11"),t("2877")),w=Object(y["a"])(D,r,n,!1,null,"f1a97a08",null);a["default"]=w.exports},5430:function(e,a,t){"use strict";var r=["数学与统计学院","物理学院","化学与化工学院","机械科学与工程学院","材料科学与工程学院","能源与动力工程学院","中欧能源学院","航空航天学院","电气与电子工程学院","船舶与海洋工程学院","力学系","生命科学与技术学院","电子信息与通信学院","光学与电子信息学院","人工智能与自动化学院","武汉光电国家研究中心","计算机科学与技术学院","建筑与城市规划学院","土木工程与力学学院","环境科学与工程学院","水电与数字化工程学院","管理学院","MBA中心","MPAcc中心","经济学院","附属武汉儿童医院","人文学院","法学院","法律硕士中心","社会学院","公共管理学院","MPA中心","马克思主义学院","外国语学院","教育科学研究院","体育部","软件学院","新闻与信息传播学院","基础医学院","公共卫生学院","药学院","法医学系","医药卫生管理学院","护理学院","计划生育研究所","附属协和医院","附属同济医院","附属梨园医院","网络空间安全学院"];a["a"]=r},"604f":function(e,a,t){},6067:function(e,a,t){e.exports=t.p+"img/female.2ec0578c.png"},"885f":function(e,a,t){"use strict";var r=t("604f"),n=t.n(r);n.a},8880:function(e,a,t){e.exports=t.p+"img/male.ab8cf6ca.png"},a750:function(e,a,t){"use strict";var r=["书法","文学","乐器","舞蹈","游戏","影视","美食","旅游","社交","歌唱","阅读","下棋"];a["a"]=r},b12d:function(e,a,t){}}]);