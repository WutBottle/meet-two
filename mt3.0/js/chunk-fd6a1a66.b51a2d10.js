(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fd6a1a66"],{5430:function(a,e,t){"use strict";var r=["数学与统计学院","物理学院","化学与化工学院","机械科学与工程学院","材料科学与工程学院","能源与动力工程学院","中欧能源学院","航空航天学院","电气与电子工程学院","船舶与海洋工程学院","力学系","生命科学与技术学院","电子信息与通信学院","光学与电子信息学院","人工智能与自动化学院","武汉光电国家研究中心","计算机科学与技术学院","建筑与城市规划学院","土木工程与力学学院","环境科学与工程学院","水电与数字化工程学院","管理学院","MBA中心","MPAcc中心","经济学院","附属武汉儿童医院","人文学院","法学院","法律硕士中心","社会学院","公共管理学院","MPA中心","马克思主义学院","外国语学院","教育科学研究院","体育部","软件学院","新闻与信息传播学院","基础医学院","公共卫生学院","药学院","法医学系","医药卫生管理学院","护理学院","计划生育研究所","附属协和医院","附属同济医院","附属梨园医院","网络空间安全学院"];e["a"]=r},"54a4":function(a,e,t){"use strict";var r=t("a0fc"),s=t.n(r);s.a},"572f7":function(a,e,t){"use strict";var r=t("e412"),s=t.n(r);s.a},6067:function(a,e,t){a.exports=t.p+"img/female.2ec0578c.png"},"64a7":function(a,e,t){"use strict";t.r(e);var r=function(){var a=this,e=a.$createElement,r=a._self._c||e;return r("div",{staticClass:"FirstStage"},[r("div",{staticClass:"back-arrow",on:{click:a.backToStage}}),r("a-row",{attrs:{gutter:16}},[r("a-col",{attrs:{span:10}},[r("h2",{staticStyle:{"font-weight":"bold","text-align":"center",color:"#2f2953"}},[a._v("您的信息")]),r("a-form",{attrs:{form:a.form,"label-col":a.formItemLayout.labelCol,"wrapper-col":a.formItemLayout.wrapperCol},on:{submit:a.handleSubmit}},[r("a-form-item",{attrs:{label:"姓名"}},[a._v(" "+a._s(a.personalData.nickname)+" "),a.personalData.gender?r("img",{staticClass:"sex-style",attrs:{src:t("8880"),alt:"male"}}):r("img",{staticClass:"sex-style",attrs:{src:t("6067"),alt:"female"}})]),r("a-form-item",{attrs:{label:"学号"}},[a._v(" "+a._s(a.personalData.schoolNumber)+" ")]),r("a-form-item",{attrs:{label:"学院"}},[r("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["college",{initialValue:a.personalData.college,rules:[{required:!0,message:"请选择所在学院!"}]}],expression:"[\n        'college',\n        { initialValue: personalData.college,\n        rules: [{ required: true, message: '请选择所在学院!' }] },\n      ]"}]},a._l(a.collegeOptions,(function(e){return r("a-select-option",{key:e},[a._v(" "+a._s(e)+" ")])})),1)],1),r("a-form-item",{attrs:{label:"身高"}},[r("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["height",{initialValue:a.personalData.height,rules:[{required:!0,message:"请输入身高!"}]}],expression:"['height',\n          { initialValue: personalData.height,\n          rules: [{ required: true, message: '请输入身高!' }] }]"}],staticStyle:{width:"100px"},attrs:{min:0,max:220,placeholder:"请输入身高"}}),r("span",{staticClass:"ant-form-text"},[a._v(" cm ")])],1),r("a-form-item",{attrs:{label:"出生日期"}},[r("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["bornDate",{initialValue:a.personalData.bornDate,rules:[{required:!0,message:"请选择出生日期!"}]}],expression:"['bornDate',\n          { initialValue: personalData.bornDate,\n          rules: [{ required: true, message: '请选择出生日期!' }]}]"}],attrs:{placeholder:"请选择出生日期","show-time":"",format:"YYYY-MM-DD"}})],1),r("a-form-item",{attrs:{label:"QQ/微信"}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["qq",{initialValue:a.personalData.qq,rules:[{required:!0,message:"请输入QQ或者微信!"}]}],expression:"[\n        'qq',\n        { initialValue: personalData.qq,\n        rules: [{ required: true, message: '请输入QQ或者微信!' }] },\n      ]"}],attrs:{placeholder:"请输入QQ或者微信"}})],1),r("a-form-item",{attrs:{label:"手机"}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["phoneNumber",{initialValue:a.personalData.phoneNumber,rules:[{required:!0,message:"请输入手机号!"},{pattern:/^1[3456789]\d{9}$/,message:"手机号格式错误!"}]}],expression:"[\n        'phoneNumber',\n        {initialValue: personalData.phoneNumber,\n        rules: [{ required: true, message: '请输入手机号!' },\n        {pattern: /^1[3456789]\\d{9}$/, message: '手机号格式错误!'}]},\n      ]"}],attrs:{placeholder:"请输入手机号"}})],1),r("a-form-item",{attrs:{label:"家乡"}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["city",{initialValue:a.personalData.city,rules:[{required:!0,message:"请输入家乡!"}]}],expression:"[\n        'city',\n        { initialValue: personalData.city,\n        rules: [{ required: true, message: '请输入家乡!' }] },\n      ]"}],attrs:{placeholder:"请输入家乡"}})],1),r("a-form-item",{attrs:{label:"兴趣爱好"}},[r("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["hobby",{initialValue:a.personalData.hobby,rules:[{required:!0,message:"请输入兴趣爱好!"}]}],expression:"[\n        'hobby',\n        { initialValue: personalData.hobby,\n        rules: [{ required: true, message: '请输入兴趣爱好!' }] },\n      ]"}],attrs:{placeholder:"请输入兴趣爱好",mode:"multiple"}},a._l(a.hobbyOption,(function(e){return r("a-select-option",{key:e},[a._v(" "+a._s(e)+" ")])})),1)],1),r("a-form-item",{attrs:{label:"自我介绍"}},[r("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["introduction",{initialValue:a.personalData.introduction,rules:[{required:!0,message:"请输入自我介绍!"}]}],expression:"[\n        'introduction',\n        { initialValue: personalData.introduction,\n        rules: [{ required: true, message: '请输入自我介绍!' }] },\n      ]"}],attrs:{placeholder:"请输入自我介绍","auto-size":{minRows:2,maxRows:5}}})],1),r("a-form-item",{attrs:{label:"上传照片"}},[r("a-upload",{directives:[{name:"decorator",rawName:"v-decorator",value:["uploadFile",{valuePropName:"uploadFile",rules:[{required:!0,message:"请上传您的生活照片!"}]}],expression:"[\n        'uploadFile',\n        {\n          valuePropName: 'uploadFile',\n          rules: [{ required: true, message: '请上传您的生活照片!' }]\n        },\n      ]"}],attrs:{fileList:a.imgFileList,beforeUpload:a.beforeUpload,remove:a.handleRemove,multiple:!1}},[r("a-button",[r("a-icon",{attrs:{type:"upload"}}),a._v(" 请上传本人照骗一张 ")],1)],1)],1),r("a-form-item",{attrs:{"wrapper-col":a.formTailLayout.wrapperCol}},[r("a-button",{attrs:{type:"primary","html-type":"submit",loading:a.uploadSpinning}},[a._v(" 生成档案 ")])],1)],1)],1),r("a-col",{attrs:{span:13}},[r("PersonalCard",{attrs:{cardData:a.personalData,cardSpinning:a.cardSpinning}})],1)],1)],1)},s=[],n=function(){var a=this,e=a.$createElement,r=a._self._c||e;return r("div",{staticClass:"PersonalCard"},[r("a-spin",{attrs:{spinning:a.cardSpinning,tip:"生成中...",size:"large"}},[r("a-card",{attrs:{title:"个人卡片"}},[Object.keys(a.cardData).length?r("div",[r("a-card-grid",{staticClass:"img-wrapper"},[r("img",{attrs:{src:a.cardData.userImg,alt:""}})]),r("a-card-grid",{staticClass:"text-wrapper"},[r("a-row",[r("a-col",{attrs:{span:12}},[r("span",{staticClass:"font-style"},[a._v(" 姓名："+a._s(a.cardData.nickname)+" "),a.cardData.gender?r("img",{staticClass:"sex-style",attrs:{src:t("8880"),alt:"male"}}):r("img",{staticClass:"sex-style",attrs:{src:t("6067"),alt:"female"}})])]),r("a-col",{attrs:{span:12}},[r("span",{staticClass:"font-style"},[a._v("学号："+a._s(a.cardData.schoolNumber))])])],1),r("a-row",[r("a-col",{attrs:{span:12}},[r("span",{staticClass:"font-style"},[a._v("学院："+a._s(a.cardData.college))])]),r("a-col",{attrs:{span:12}},[r("span",{staticClass:"font-style"},[a._v("身高："+a._s(a.cardData.height)+"cm")])])],1),r("a-row",[r("a-col",{attrs:{span:12}},[r("span",{staticClass:"font-style"},[a._v("出生日期："+a._s(a.cardData.bornDate&&a.moment(a.cardData.bornDate).format("YYYY-MM-DD")))])]),r("a-col",{attrs:{span:12}},[r("span",{staticClass:"font-style"},[a._v("QQ/微信："+a._s(a.cardData.qq))])])],1),r("a-row",[r("a-col",{attrs:{span:12}},[r("span",{staticClass:"font-style"},[a._v("手机："+a._s(a.cardData.phoneNumber))])]),r("a-col",{attrs:{span:12}},[r("span",{staticClass:"font-style"},[a._v("家乡："+a._s(a.cardData.city))])])],1),r("a-row",[r("a-col",{attrs:{span:24}},[r("span",{staticClass:"font-style"},[a._v("兴趣爱好：")]),r("span",a._l(a.cardData.hobby,(function(e,t){return r("a-tag",{key:t,attrs:{color:a.tagColors[t%6]}},[a._v(" "+a._s(e)+" ")])})),1)])],1),r("a-row",[r("a-col",{attrs:{span:24}},[r("span",{staticClass:"font-style"},[a._v(" 个人介绍："+a._s(a.cardData.introduction)+" ")])])],1)],1)],1):r("a-empty")],1)],1)],1)},o=[],i=t("c1df"),l=t.n(i),c={name:"PersonalCard",props:{cardData:Object,cardSpinning:Boolean},data:function(){return{tagColors:["pink","red","orange","green","cyan","blue","purple"]}},methods:{moment:l.a}},u=c,p=(t("54a4"),t("2877")),m=Object(p["a"])(u,n,o,!1,null,"284ab442",null),d=m.exports,g=t("d6a1"),f=t("c59a"),b=t("a750"),h=t("5430");function v(a){return _(a)||w(a)||y(a)||D()}function D(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function y(a,e){if(a){if("string"===typeof a)return C(a,e);var t=Object.prototype.toString.call(a).slice(8,-1);return"Object"===t&&a.constructor&&(t=a.constructor.name),"Map"===t||"Set"===t?Array.from(a):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?C(a,e):void 0}}function w(a){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(a))return Array.from(a)}function _(a){if(Array.isArray(a))return C(a)}function C(a,e){(null==e||e>a.length)&&(e=a.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=a[t];return r}var q={labelCol:{span:8},wrapperCol:{span:10}},S={labelCol:{span:4},wrapperCol:{span:12,offset:8}},x={name:"FirstStage",components:{PersonalCard:d},data:function(){return{form:this.$form.createForm(this),formItemLayout:q,formTailLayout:S,hobbyOption:b["a"],personalData:{},imgFileList:[],collegeOptions:h["a"],uploadSpinning:!1,fileName:"",cardSpinning:!1}},mounted:function(){this.getPersonalData()},methods:{getPersonalData:function(){var a=this;g["a"].userController.getUserData().then((function(e){e&&(a.personalData=e.data.data,a.personalData.hobby=e.data.data.hobby?e.data.data.hobby.split(","):[],a.personalData.bornDate=e.data.data.bornDate&&l()(e.data.data.bornDate),a.personalData.userImg&&(a.fileName=a.personalData.userImg,a.imgFileList=[],a.imgFileList.push({uid:"-1",name:"image",status:"done",url:a.personalData.userImg}),a.form.setFieldsValue({uploadFile:a.imgFileList})),a.cardSpinning=!1)}))},handleSubmit:function(a){var e=this;a.preventDefault(),this.form.validateFields((function(a,t){a||(e.cardSpinning=!0,e.personalData=t,Object.assign(e.personalData,{gender:e.gender,nickname:e.nickname,schoolNumber:e.schoolNumber,userImg:e.fileName}),e.personalData.hobby=e.personalData.hobby.join(","),e.personalData.bornDate=l()(e.personalData.bornDate).format("YYYY-MM-DD"),g["a"].userController.verifyUser(e.personalData).then((function(a){a&&a.data.meta.success?(e.$message.success("档案生成成功"),e.getPersonalData()):e.$message.error(a.data.meta.message)})))}))},backToStage:function(){this.$router.push({path:"/pc/stage"})},handleRemove:function(a){var e=this.imgFileList.indexOf(a),t=this.imgFileList.slice();t.splice(e,1),this.imgFileList=t,this.form.setFieldsValue({uploadFile:null})},beforeUpload:function(a){var e=this;if(this.uploadSpinning=!0,this.handleRemove(a),"image/png"===a.type||"image/jpg"===a.type||"image/jpeg"===a.type){var t=new FormData;this.imgFileList=[].concat(v(this.imgFileList),[a]),this.imgFileList.forEach((function(a){t.append("multipartFiles",a)})),g["a"].userController.uploadAvatar(t).then((function(a){e.fileName=f["a"].serverBaseController+a.data.data,e.$message.success("文件已上传"),e.uploadSpinning=!1})).catch((function(a){e.$message.error("上传失败"),e.uploadSpinning=!1}))}else this.$message.error("只能上传.jpg.jpeg.png类型文件"),this.handleRemove(a),this.uploadSpinning=!1;return!1}}},F=x,N=(t("572f7"),Object(p["a"])(F,r,s,!1,null,"77c9c147",null));e["default"]=N.exports},8880:function(a,e,t){a.exports=t.p+"img/male.ab8cf6ca.png"},a0fc:function(a,e,t){},a750:function(a,e,t){"use strict";var r=["书法","文学","乐器","舞蹈","游戏","影视","美食","旅游","社交","歌唱","阅读","下棋"];e["a"]=r},e412:function(a,e,t){}}]);